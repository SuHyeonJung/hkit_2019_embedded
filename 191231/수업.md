```console
pi@raspberrypi:~/development/drivers/sample_driver $ nano sample_driver.c
```
```c
#include <linux/module.h>
#include <linux/fs.h>

#define SAMPLE_MAJOR 220
#define SAMPLE_MINOR 0
#define DEVICE_NAME "sample"

static int sample_open(struct inode *inodep, struct file *filep)
{
    printk(KERN_INFO "call sample_open\n");
    return 0;
}

static ssize_t sample_read(struct file *filep, char *buffer, size_t len, loff_t *offset)
{
    printk(KERN_INFO "call sample_read\n");
    return len;
}

static ssize_t sample_write(struct file *filep, const char *buffer, size_t len, loff_t *offset)
{
    printk(KERN_INFO "buf : %s\n", buffer);
    printk(KERN_INFO "call sample_write\n");
    return len;
}

static int sample_release(struct inode *inodep, struct file *filep)
{                                                                                                                           printk(KERN_INFO "call sample_release\n");                                                                              return 0;                                                                                                           }

static struct file_operations fops =
    {
        .owner = THIS_MODULE,
        .open = sample_open,
        .read = sample_read,
        .write = sample_write,
        .release = sample_release,
};

static int __init sample_init(void)
{
    register_chrdev(SAMPLE_MAJOR, DEVICE_NAME, &fops);
    printk(KERN_INFO "call sample_init\n");
    return 0;
}

static void __exit sample_exit(void)
{
    unregister_chrdev(SAMPLE_MAJOR, DEVICE_NAME);
    printk(KERN_INFO "call sample_exit\n");
}

module_init(sample_init);
module_exit(sample_exit);

MODULE_LICENSE("GPL");
```
```console
pi@raspberrypi:~/development/drivers/sample_driver $ nano sample_driver.c
```
```
obj-m+=sample_driver.o

all:
    make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) modules
clean:
    make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) clean
```
```console
pi@raspberrypi:~/development/drivers/sample_driver $ make
make -C /lib/modules/4.19.75-v7+/build/ M=/home/pi/development/drivers/sample_driver modules
make[1]: 디렉터리 '/usr/src/linux-headers-4.19.75-v7+' 들어감
  CC [M]  /home/pi/development/drivers/sample_driver/sample_driver.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/pi/development/drivers/sample_driver/sample_driver.mod.o
  LD [M]  /home/pi/development/drivers/sample_driver/sample_driver.ko
make[1]: 디렉터리 '/usr/src/linux-headers-4.19.75-v7+' 나감
pi@raspberrypi:~/development/drivers/sample_driver $ 
```

